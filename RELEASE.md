ADEiger Releases
==================

The latest untagged master branch can be obtained at
https://github.com/brunoseivam/ADEiger.

Tagged source code can be obtained at
https://github.com/brunoseivam/ADEiger/releases.

Release Notes
=============

R2-4
----
* Added EDM screens, courtesy of Gary Yendell from Diamond Light Source
* Increase precision of double -> string conversion to maximum (thanks to Gary
Yendell)

R2-3-1
----
* Fix `envPaths` not being generated by `make all` at ADEiger root.
* Fix `pollTask` sometimes skipping files.
* Fix trigger mode ordering issue introduced in R2-2.
* Fix `streamTask` getting confused when receiving an "end" frame from a previous acquisition.

R2-3
----

* Prevent file from being deleted from detector's disk if it wasn't properly saved to local disk.
* Fix files not being saved when the driver was too busy.
* Detector's disk free space is now displayed in GB instead of kB
* Increase `SensorThickness_RBV.PREC` to 6 
* Fetch the following parameters when updating the status:
    * FileWriter Free Space
    * Stream API Dropped frames
* Added the following parameters to the driver:
    * Stream API header detail (`stream/config/header_detail`)
    * Stream API header appendix (`stream/config/header_appendix`)
    * Stream API image appendix (`stream/config/image_appendix`)

R2-2-2
------

* Fix Segmentation Fault when using the Monitor
* Fix error when clearing the files in the FileWriter
* Fix error when parsing `roi_mode` from Eigers that don't have this feature

R2-2-1
------

* Fix file owner/group not being set.


R2-2
----

Depends on Eiger firmware 1.6.4+, ADCore R2-6+

* Major rewrite of how the driver accesses detector parameters:
    * Value limits are enforced by the driver before being sent to the detector
* New parameters can be accessed just with a template file, see documentation
* Added MEDM screens, courtesy of Vesna Samardzic-Boban (Australian Synchrotron) and Zachary Brown (CHESS)
* Fix status not updating
* Fix incorrect SensorMaterial_RBV DTYP in database file
* Fix incorrect SensorMaterial_RBV display in OPI
* Prevent using FileWriter or Stream as a Data Source when the selected compression algorithm is Bit Shuffle LZ4.
* Added PV's to set owner, group and permissions on downloaded files.
    * This depends on the IOC executable having the appropriate `CAP_SETUID` and `CAP_SETGID` capabilities set.
* Extra header data in the streaming interface is now ignored if `header_detail` is other than "none". 
* Added the following parameters to the driver:
    * Dead Time (`detector/config/detector_readout_time`)
    * FileWriter State (`filewriter/status/state`)
    * Monitor State (`monitor/status/state`)
    * Stream State (`stream/status/state`)

R2-1
----

Depends on Eiger firmware 1.6.2+

* Added all MX parameters (Chi, Kappa, Omega, Phi, Two Theta)
* Speeds up acquisition by avoiding resending the same energy setting if it hasn't changed.
* Fix a bug that caused the driver to fail to download huge images.
* Use monitor timeout instead of polling.
* Added the following parameters to the driver:
    * Omega (tracks the Omega angle for every frame)
    * Countrate Correction Count Cutoff (`detector/config/countrate_correction_count_cutoff`)
    * Sensor Thickness (`detector/config/sensor_thickness`)
    * Sensor Material (`detector/config/sensor_material`)
    * X Pixel Size (`detector/config/x_pixel_size`)
    * Y Pixel Size (`detector/config/y_pixel_size`)
    * Description (`detector/config/description`)
    * ROI Mode (`detector/config/roi_mode`)
    * Compression Algorithm (`detector/config/compression`)
    * Pixel Mask Applied (`detector/config/pixel_mask_applied`)

R2-0
----

Depends on Eiger firmware 1.5.0+

* Added support for auto removing files on detector disk
* Added support for ZeroMQ streaming interface.
* Added support for Monitor interface.
* Added macro prefix to paths to other areaDetector screens on OPI.
* Added parameters to track FileWriter disk usage and DCU buffer usage.
* Several fixes and improvements.

R1-0
----
* Supports all trigger modes: INTS, INTE, EXTS and EXTE.
* Redesigned with a multithreaded architecture:
    * Downloading, saving to disk and parsing HDF5 files all occur in parallel.
* Faster file download.
* Eiger API and areaDetector driver decoupled.

R0-1-pre
--------
* First release.
* Supports only INTS mode.
* Cannot interrupt long acquisitions.
